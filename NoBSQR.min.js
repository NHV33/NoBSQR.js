function NoBSQR(e){var o=this;e="object"==typeof e?e:{},o.revision=3,o.imageTypes={bmp:"image/bmp",gif:"image/gif",jpeg:"image/jpeg",jpg:"image/jpg",png:"image/png","svg+xml":"image/svg+xml",tiff:"image/tiff",webp:"image/webp","x-icon":"image/x-icon"},o.toTable=e.toTable,o.domElement=o.toTable?document.createElement("div"):document.createElement("canvas"),o.url=e.url||"",o.size=e.size||300,o.qrc=!1,o.colorLight=e.colorLight||"#fff",o.colorDark=e.colorDark||"#000",o.ecclevel=e.ecclevel||1,o.noBorder=e.noBorder,o.borderSize=e.borderSize||0,o.textDisplay=e.textDisplay,o.textPosition=e.textPosition||"bottom",o.textSizeAdjust=e.textSizeAdjust||0,o.pixelRadius=e.pixelRadius||0,o.textResizeIterationCap=e.textResizeIterationCap||1e3,o.textResizeAmount=e.textResizeAmount||1,"hidden"===o.textPosition&&(o.textDisplay=!1),0!==o.borderSize&&!0!==o.noBorder||(o.noBorder=!0,o.borderSize=0),o.allowTextBorders=!o.noBorder&&o.borderSize>=20,(o.allowTextBorders||o.toTable)&&"center"!==o.textPosition||(o.ecclevel=4);var r,t,i,n,a,f,l,c=[],s=[],d=[],u=[],g=[],m=[],p=function(e,o){var r;e>o&&(r=e,e=o,o=r),r=o,r*=o,r+=o,r>>=1,u[r+=e]=1},v=function(e,o){var r;for(d[e+i*o]=1,r=-2;r<2;r++)d[e+r+i*(o-2)]=1,d[e-2+i*(o+r+1)]=1,d[e+2+i*(o+r)]=1,d[e+r+1+i*(o+2)]=1;for(r=0;r<2;r++)p(e-1,o+r),p(e+1,o-r),p(e-r,o-1),p(e+r,o+1)},x=function(e){for(;e>=255;)e=((e-=255)>>8)+(255&e);return e},b=function(e,o,r,t){var i,n,a,f=NoBSQR.gexp,l=NoBSQR.glog;for(i=0;i<t;i++)c[r+i]=0;for(i=0;i<o;i++){if(255!=(a=l[c[e+i]^c[r]]))for(n=1;n<t;n++)c[r+n-1]=c[r+n]^f[x(a+m[t-n])];else for(n=r;n<r+t;n++)c[n]=c[n+1];c[r+t-1]=255==a?0:f[x(a+m[0])]}},h=function(e,o){var r;return e>o&&(r=e,e=o,o=r),r=o,r+=o*o,r>>=1,u[r+=e]},S=function(e){var o,r,t,n;switch(e){case 0:for(r=0;r<i;r++)for(o=0;o<i;o++)o+r&1||h(o,r)||(d[o+r*i]^=1);break;case 1:for(r=0;r<i;r++)for(o=0;o<i;o++)1&r||h(o,r)||(d[o+r*i]^=1);break;case 2:for(r=0;r<i;r++)for(t=0,o=0;o<i;o++,t++)3==t&&(t=0),t||h(o,r)||(d[o+r*i]^=1);break;case 3:for(n=0,r=0;r<i;r++,n++)for(3==n&&(n=0),t=n,o=0;o<i;o++,t++)3==t&&(t=0),t||h(o,r)||(d[o+r*i]^=1);break;case 4:for(r=0;r<i;r++)for(t=0,n=r>>1&1,o=0;o<i;o++,t++)3==t&&(t=0,n=!n),n||h(o,r)||(d[o+r*i]^=1);break;case 5:for(n=0,r=0;r<i;r++,n++)for(3==n&&(n=0),t=0,o=0;o<i;o++,t++)3==t&&(t=0),(o&r&1)+!(!t|!n)||h(o,r)||(d[o+r*i]^=1);break;case 6:for(n=0,r=0;r<i;r++,n++)for(3==n&&(n=0),t=0,o=0;o<i;o++,t++)3==t&&(t=0),(o&r&1)+(t&&t==n)&1||h(o,r)||(d[o+r*i]^=1);break;case 7:for(n=0,r=0;r<i;r++,n++)for(3==n&&(n=0),t=0,o=0;o<i;o++,t++)3==t&&(t=0),(t&&t==n)+(o+r&1)&1||h(o,r)||(d[o+r*i]^=1)}},B=function(e){var o,r=0;for(o=0;o<=e;o++)g[o]>=5&&(r+=NoBSQR.N1+g[o]-5);for(o=3;o<e-1;o+=2)g[o-2]==g[o+2]&&g[o+2]==g[o-1]&&g[o-1]==g[o+1]&&3*g[o-1]==g[o]&&(0==g[o-3]||o+3>e||3*g[o-3]>=4*g[o]||3*g[o+3]>=4*g[o])&&(r+=NoBSQR.N3);return r},R=function(){var e,o,r,t,n,a=0,f=0;for(o=0;o<i-1;o++)for(e=0;e<i-1;e++)(d[e+i*o]&&d[e+1+i*o]&&d[e+i*(o+1)]&&d[e+1+i*(o+1)]||!(d[e+i*o]||d[e+1+i*o]||d[e+i*(o+1)]||d[e+1+i*(o+1)]))&&(a+=NoBSQR.N2);for(o=0;o<i;o++){for(g[0]=0,r=t=e=0;e<i;e++)(n=d[e+i*o])==t?g[r]++:g[++r]=1,f+=(t=n)?1:-1;a+=B(r)}f<0&&(f=-f);var l=f,c=0;for(l+=l<<2,l<<=1;l>i*i;)l-=i*i,c++;for(a+=c*NoBSQR.N4,e=0;e<i;e++){for(g[0]=0,r=t=o=0;o<i;o++)(n=d[e+i*o])==t?g[r]++:g[++r]=1,t=n;a+=B(r)}return a};o.genframe=function(e){var o,g,B,N,z,Q,k,w,C=NoBSQR.eccblocks,T=NoBSQR.gexp,y=NoBSQR.glog;N=e.length,t=0;do{if(t++,B=4*(r-1)+16*(t-1),n=C[B++],a=C[B++],f=C[B++],l=C[B],N<=(B=f*(n+a)+a-3+(t<=9)))break}while(t<40);for(i=17+4*t,z=f+(f+l)*(n+a)+a,N=0;N<z;N++)s[N]=0;for(c=e.slice(0),N=0;N<i*i;N++)d[N]=0;for(N=0;N<(i*(i+1)+1)/2;N++)u[N]=0;for(N=0;N<3;N++){for(B=0,g=0,1==N&&(B=i-7),2==N&&(g=i-7),d[g+3+i*(B+3)]=1,o=0;o<6;o++)d[g+o+i*B]=1,d[g+i*(B+o+1)]=1,d[g+6+i*(B+o)]=1,d[g+o+1+i*(B+6)]=1;for(o=1;o<5;o++)p(g+o,B+1),p(g+1,B+o+1),p(g+5,B+o),p(g+o+1,B+5);for(o=2;o<4;o++)d[g+o+i*(B+2)]=1,d[g+2+i*(B+o+1)]=1,d[g+4+i*(B+o)]=1,d[g+o+1+i*(B+4)]=1}if(t>1)for(N=NoBSQR.adelta[t],g=i-7;;){for(o=i-7;o>N-3&&(v(o,g),!(o<N));)o-=N;if(g<=N+9)break;v(6,g-=N),v(g,6)}for(d[8+i*(i-8)]=1,g=0;g<7;g++)p(7,g),p(i-8,g),p(7,g+i-7);for(o=0;o<8;o++)p(o,7),p(o+i-8,7),p(o,i-8);for(o=0;o<9;o++)p(o,8);for(o=0;o<8;o++)p(o+i-8,8),p(8,o);for(g=0;g<7;g++)p(8,g+i-7);for(o=0;o<i-14;o++)1&o?(p(8+o,6),p(6,8+o)):(d[8+o+6*i]=1,d[6+i*(8+o)]=1);if(t>6)for(N=NoBSQR.vpat[t-7],B=17,o=0;o<6;o++)for(g=0;g<3;g++,B--)1&(B>11?t>>B-12:N>>B)?(d[5-o+i*(2-g+i-11)]=1,d[2-g+i-11+i*(5-o)]=1):(p(5-o,2-g+i-11),p(2-g+i-11,5-o));for(g=0;g<i;g++)for(o=0;o<=g;o++)d[o+i*g]&&p(o,g);for(z=c.length,Q=0;Q<z;Q++)s[Q]=c.charCodeAt(Q);if(c=s.slice(0),z>=(o=f*(n+a)+a)-2&&(z=o-2,t>9&&z--),Q=z,t>9){for(c[Q+2]=0,c[Q+3]=0;Q--;)N=c[Q],c[Q+3]|=255&N<<4,c[Q+2]=N>>4;c[2]|=255&z<<4,c[1]=z>>4,c[0]=64|z>>12}else{for(c[Q+1]=0,c[Q+2]=0;Q--;)N=c[Q],c[Q+2]|=255&N<<4,c[Q+1]=N>>4;c[1]|=255&z<<4,c[0]=64|z>>4}for(Q=z+3-(t<10);Q<o;)c[Q++]=236,c[Q++]=17;for(m[0]=1,Q=0;Q<l;Q++){for(m[Q+1]=1,k=Q;k>0;k--)m[k]=m[k]?m[k-1]^T[x(y[m[k]]+Q)]:m[k-1];m[0]=T[x(y[m[0]]+Q)]}for(Q=0;Q<=l;Q++)m[Q]=y[m[Q]];for(B=o,g=0,Q=0;Q<n;Q++)b(g,f,B,l),g+=f,B+=l;for(Q=0;Q<a;Q++)b(g,f+1,B,l),g+=f+1,B+=l;for(g=0,Q=0;Q<f;Q++){for(k=0;k<n;k++)s[g++]=c[Q+k*f];for(k=0;k<a;k++)s[g++]=c[n*f+Q+k*(f+1)]}for(k=0;k<a;k++)s[g++]=c[n*f+Q+k*(f+1)];for(Q=0;Q<l;Q++)for(k=0;k<n+a;k++)s[g++]=c[o+Q+k*l];for(c=s,o=g=i-1,B=z=1,w=(f+l)*(n+a)+a,Q=0;Q<w;Q++)for(N=c[Q],k=0;k<8;k++,N<<=1){128&N&&(d[o+i*g]=1);do{z?o--:(o++,B?0!=g?g--:(B=!B,6==(o-=2)&&(o--,g=9)):g!=i-1?g++:(B=!B,6==(o-=2)&&(o--,g-=8))),z=!z}while(h(o,g))}for(c=d.slice(0),N=0,g=3e4,B=0;B<8&&(S(B),(o=R())<g&&(g=o,N=B),7!=N);B++)d=c.slice(0);for(N!=B&&S(N),g=NoBSQR.fmtword[N+(r-1<<3)],B=0;B<8;B++,g>>=1)1&g&&(d[i-1-B+8*i]=1,B<6?d[8+i*B]=1:d[8+i*(B+1)]=1);for(B=0;B<7;B++,g>>=1)1&g&&(d[8+i*(i-7+B)]=1,B?d[6-B+8*i]=1:d[7+8*i]=1);return d},o.init=function(){r=o.ecclevel;var e=o.genframe(o.url);o.toTable?o.tableWrite(e,i):o.canvasWrite(e,i)},o.init()}NoBSQR.prototype={canvasWrite:function(e,o){var r=this;if(!r.qrc&&(r.qrc=r.getContext(r.domElement),!r.qrc))return r.toTable=!0,r.domElement=document.createElement("div"),void r.tableWrite(e,o);var t=r.size,i=r.qrc,n=t+2*r.borderSize,a=t/o,f=r.borderSize;r.noBorder?(i.canvas.width=i.canvas.height=t,f=0):i.canvas.width=i.canvas.height=n,i.clearRect(0,0,n,n),i.fillStyle=r.colorLight,i.fillRect(0,0,n,n),i.fillStyle=r.colorDark;const l=a*(r.pixelRadius/100);for(var c=0;c<o;c++)for(var s=0;s<o;s++)e[s*o+c]&&(i.beginPath(),i.roundRect(a*c+f,a*s+f,1.05*a,1.05*a,[l]),i.fill());if(!1===r.textDisplay)return;let d=0;const u=Math.abs(r.textSizeAdjust);u<=100&&(d=r.textSizeAdjust<0?(100-u)/100:u/100+1);i.textAlign="center",i.textBaseline="middle";let g=r.borderSize*d*.8,m=n-r.borderSize/2;"top"===r.textPosition&&(m=r.borderSize/2),r.allowTextBorders&&"center"!==r.textPosition||(m=n/2,g=t/8*d),i.font=`bold ${g}px monospace`;let p=i.measureText(r.url).width,v=0;for(;v<r.textResizeIterationCap&&p>.95*n;)g-=r.textResizeAmount,i.font=`bold ${g}px monospace`,p=i.measureText(r.url).width,v+=1;i.lineWidth=g/5,i.strokeStyle=r.colorDark,i.fillStyle=r.colorLight,i.strokeText(r.url,n/2,m),i.fillText(r.url,n/2,m)},tableWrite:function(e,o){var r=this,t=Math.round(this.size/o-3.5),i=Math.ceil(r.borderSize/t),n=t+"px",a=o+(r.noBorder?0:2*i),f=i,l="width:"+n+";height:"+n+";",c=r.colorLight,s=r.colorDark,d=document.createElement("table");d.style.cssText="border:0;border-collapse:collapse;";for(var u,g=document.createElement("tr"),m=document.createElement("td"),p=function(){return m.cloneNode()},v=function(){var e=p();return e.style.cssText=l+"background:"+c,e},x=function(e){for(var o=e.firstChild,r=0;r<f;r++)e.insertBefore(v(),o),e.appendChild(v())},b=0;b<o;b++){var h=g.cloneNode();d.appendChild(h);for(var S=0;S<o;S++)if(1===e[b*o+S]){var B=(u=void 0,(u=p()).style.cssText=l+"background:"+s,u);h.appendChild(B)}else{var R=v();h.appendChild(R)}r.noBorder||x(h)}r.noBorder||function(e){for(var o=e.firstChild,r=0;r<i;r++){for(var t=g.cloneNode(),n=0;n<a;n++){var f=v();t.appendChild(f)}e.appendChild(t),e.insertBefore(t.cloneNode(!0),o)}}(d),r.domElement.innerHTML="",r.domElement.appendChild(d)},getContext:function(e){return e.getContext&&e.getContext("2d")?e.getContext("2d"):(console.log("Browser does not have 2d Canvas support"),!1)},toImage:function(e){if(this.qrc){var o=this.imageTypes[e];if(!o)throw new Error(e+" is not a valid image type ");var r=new Image;return r.src=this.domElement.toDataURL(o),r}}},NoBSQR.adelta=[0,11,15,19,23,27,31,16,18,20,22,24,26,28,20,22,24,24,26,28,28,22,24,24,26,26,28,28,24,24,26,26,26,28,28,24,26,26,26,28,28],NoBSQR.vpat=[3220,1468,2713,1235,3062,1890,2119,1549,2344,2936,1117,2583,1330,2470,1667,2249,2028,3780,481,4011,142,3098,831,3445,592,2517,1776,2234,1951,2827,1070,2660,1345,3177],NoBSQR.fmtword=[30660,29427,32170,30877,26159,25368,27713,26998,21522,20773,24188,23371,17913,16590,20375,19104,13663,12392,16177,14854,9396,8579,11994,11245,5769,5054,7399,6608,1890,597,3340,2107],NoBSQR.eccblocks=[1,0,19,7,1,0,16,10,1,0,13,13,1,0,9,17,1,0,34,10,1,0,28,16,1,0,22,22,1,0,16,28,1,0,55,15,1,0,44,26,2,0,17,18,2,0,13,22,1,0,80,20,2,0,32,18,2,0,24,26,4,0,9,16,1,0,108,26,2,0,43,24,2,2,15,18,2,2,11,22,2,0,68,18,4,0,27,16,4,0,19,24,4,0,15,28,2,0,78,20,4,0,31,18,2,4,14,18,4,1,13,26,2,0,97,24,2,2,38,22,4,2,18,22,4,2,14,26,2,0,116,30,3,2,36,22,4,4,16,20,4,4,12,24,2,2,68,18,4,1,43,26,6,2,19,24,6,2,15,28,4,0,81,20,1,4,50,30,4,4,22,28,3,8,12,24,2,2,92,24,6,2,36,22,4,6,20,26,7,4,14,28,4,0,107,26,8,1,37,22,8,4,20,24,12,4,11,22,3,1,115,30,4,5,40,24,11,5,16,20,11,5,12,24,5,1,87,22,5,5,41,24,5,7,24,30,11,7,12,24,5,1,98,24,7,3,45,28,15,2,19,24,3,13,15,30,1,5,107,28,10,1,46,28,1,15,22,28,2,17,14,28,5,1,120,30,9,4,43,26,17,1,22,28,2,19,14,28,3,4,113,28,3,11,44,26,17,4,21,26,9,16,13,26,3,5,107,28,3,13,41,26,15,5,24,30,15,10,15,28,4,4,116,28,17,0,42,26,17,6,22,28,19,6,16,30,2,7,111,28,17,0,46,28,7,16,24,30,34,0,13,24,4,5,121,30,4,14,47,28,11,14,24,30,16,14,15,30,6,4,117,30,6,14,45,28,11,16,24,30,30,2,16,30,8,4,106,26,8,13,47,28,7,22,24,30,22,13,15,30,10,2,114,28,19,4,46,28,28,6,22,28,33,4,16,30,8,4,122,30,22,3,45,28,8,26,23,30,12,28,15,30,3,10,117,30,3,23,45,28,4,31,24,30,11,31,15,30,7,7,116,30,21,7,45,28,1,37,23,30,19,26,15,30,5,10,115,30,19,10,47,28,15,25,24,30,23,25,15,30,13,3,115,30,2,29,46,28,42,1,24,30,23,28,15,30,17,0,115,30,10,23,46,28,10,35,24,30,19,35,15,30,17,1,115,30,14,21,46,28,29,19,24,30,11,46,15,30,13,6,115,30,14,23,46,28,44,7,24,30,59,1,16,30,12,7,121,30,12,26,47,28,39,14,24,30,22,41,15,30,6,14,121,30,6,34,47,28,46,10,24,30,2,64,15,30,17,4,122,30,29,14,46,28,49,10,24,30,24,46,15,30,4,18,122,30,13,32,46,28,48,14,24,30,42,32,15,30,20,4,117,30,40,7,47,28,43,22,24,30,10,67,15,30,19,6,118,30,18,31,47,28,34,34,24,30,20,61,15,30],NoBSQR.glog=[255,0,1,25,2,50,26,198,3,223,51,238,27,104,199,75,4,100,224,14,52,141,239,129,28,193,105,248,200,8,76,113,5,138,101,47,225,36,15,33,53,147,142,218,240,18,130,69,29,181,194,125,106,39,249,185,201,154,9,120,77,228,114,166,6,191,139,98,102,221,48,253,226,152,37,179,16,145,34,136,54,208,148,206,143,150,219,189,241,210,19,92,131,56,70,64,30,66,182,163,195,72,126,110,107,58,40,84,250,133,186,61,202,94,155,159,10,21,121,43,78,212,229,172,115,243,167,87,7,112,192,247,140,128,99,13,103,74,222,237,49,197,254,24,227,165,153,119,38,184,180,124,17,68,146,217,35,32,137,46,55,63,209,91,149,188,207,205,144,135,151,178,220,252,190,97,242,86,211,171,20,42,93,158,132,60,57,83,71,109,65,162,31,45,67,216,183,123,164,118,196,23,73,236,127,12,111,246,108,161,59,82,41,157,85,170,251,96,134,177,187,204,62,90,203,89,95,176,156,169,160,81,11,245,22,235,122,117,44,215,79,174,213,233,230,231,173,232,116,214,244,234,168,80,88,175],NoBSQR.gexp=[1,2,4,8,16,32,64,128,29,58,116,232,205,135,19,38,76,152,45,90,180,117,234,201,143,3,6,12,24,48,96,192,157,39,78,156,37,74,148,53,106,212,181,119,238,193,159,35,70,140,5,10,20,40,80,160,93,186,105,210,185,111,222,161,95,190,97,194,153,47,94,188,101,202,137,15,30,60,120,240,253,231,211,187,107,214,177,127,254,225,223,163,91,182,113,226,217,175,67,134,17,34,68,136,13,26,52,104,208,189,103,206,129,31,62,124,248,237,199,147,59,118,236,197,151,51,102,204,133,23,46,92,184,109,218,169,79,158,33,66,132,21,42,84,168,77,154,41,82,164,85,170,73,146,57,114,228,213,183,115,230,209,191,99,198,145,63,126,252,229,215,179,123,246,241,255,227,219,171,75,150,49,98,196,149,55,110,220,165,87,174,65,130,25,50,100,200,141,7,14,28,56,112,224,221,167,83,166,81,162,89,178,121,242,249,239,195,155,43,86,172,69,138,9,18,36,72,144,61,122,244,245,247,243,251,235,203,139,11,22,44,88,176,125,250,233,207,131,27,54,108,216,173,71,142,0],NoBSQR.N1=3,NoBSQR.N2=3,NoBSQR.N3=40,NoBSQR.N4=10;